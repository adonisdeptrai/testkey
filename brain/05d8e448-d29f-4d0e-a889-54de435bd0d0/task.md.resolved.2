# Task: Migrate sang Supabase Auth System

## Mục tiêu
Thay thế custom JWT authentication bằng Supabase Auth built-in để tận dụng:
- Session management tự động
- Email/Password auth + Google OAuth unified
- Row Level Security (RLS) integration
- Refresh token handling
- Built-in security features

---

## Phase 1: Backend Refactoring
- [ ] Remove custom JWT logic khỏi `/api/auth/login`
- [ ] Remove custom JWT logic khỏi `/api/auth/register`
- [ ] Update auth middleware để verify Supabase session
- [ ] Simplify OAuth callback route
- [ ] Remove `JWT_SECRET` dependency

## Phase 2: Frontend Refactoring
- [ ] Update [AuthContext](file:///c:/Users/Adonis/Downloads/App/src/contexts/AuthContext.tsx#5-13) để sử dụng Supabase session hooks
- [ ] Update [login()](file:///c:/Users/Adonis/Downloads/App/src/contexts/AuthContext.tsx#30-51) method → `supabase.auth.signInWithPassword()`
- [ ] Update [register()](file:///c:/Users/Adonis/Downloads/App/src/contexts/AuthContext.tsx#52-73) method → `supabase.auth.signUp()`
- [ ] Auto-sync Supabase session với React state
- [ ] Update logout để clear Supabase session

## Phase 3: Database & Migration
- [ ] Enable Supabase Auth trong Dashboard
- [ ] Migrate existing users sang Supabase Auth
- [ ] Setup RLS policies cho tables
- [ ] Update `users` table structure nếu cần

## Phase 4: Testing & Cleanup
- [ ] Test email/password login flow
- [ ] Test Google OAuth flow
- [ ] Test session persistence
- [ ] Remove unused JWT code
- [ ] Update documentation
